!function(e){function t(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,o){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/static/assets/ubibi/",t(t.s=2)}([function(e,t,i){"use strict";function o(e,t,i,o,n){return new Promise(function(s,a){var r=new XMLHttpRequest;r.open(e,t,!0),r.responseType=n||"text";"form"===o&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"json"===o&&r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<300||304==r.status){var e=r.responseText;s(e)}else a(r.status)},i?r.send(i):r.send()})}function n(e){return JSON.parse(e)}function s(e,t){return t?(0,v.getCacheOrCreatePromise)(e,t,function(){return o("GET",e)}):o("GET",e)}function a(e,t){return s(e,t).then(n)}function r(e,t,i){return o("POST",e,t,i)}function c(e,t,i){return o(e,t,JSON.stringify(i),"json").then(n)}function l(e,t){return c("post",e,t)}function p(e,t){return c("put",e,t)}function u(e,t){return c("delete",e,t)}function d(e){var t=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];o&&t.push(i+"="+encodeURIComponent(o))}return t.join("&")}Object.defineProperty(t,"__esModule",{value:!0});var v=i(3);t.default={sendXmlHttpRequest:o,sendGetRequest:s,sendGetJSONRequest:a,sendPostRequest:r,sendPostJSONRequest:l,sendPutJSONRequest:p,sendDeleteJSONRequest:u,toQueryString:d}},function(e,t,i){"use strict";function o(){}function n(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function s(e){return!!(n(e,"Object")&&n(e.then,"Function")&&n(e.catch,"Function"))}function a(e){var t=(new e).$mount(),i=function(){t.isDialogOpen=!1,document.body.removeChild(t.$el),setTimeout(function(){t.$destroy()},1)};return t.$on(u,i),document.body.appendChild(t.$el),t.isDialogOpen=!0,t}function r(e){var t=e.dialog||{},i=t.beforeClose||o,n=t.afterClose||o,a=e.methods||{};a.onCloseDialog=function(e){var t=this;i=i.bind(t),n=n.bind(t);var o=i(e);s(o)?o.then(function(i){!1!==o&&(t.$emit(u,e),n(e))}):!1!==o&&(t.$emit(u,e),n(e))};var r=t.className||"",c='<bs-dialog @close="onCloseDialog" className="'+r+'" >'+e.template+"</bs-dialog>";return e.template=c,e.methods=a,Vue.extend(e)}function c(e){var t=r(e);this.openDialog=function(){return a(t)}}function l(e,t){var i=v.openDialog();i.message=e,i.title=t}Object.defineProperty(t,"__esModule",{value:!0}),t.openAlert=l;var p=i(10);i(11);var u="close",d=1e3;Vue.component("bs-dialog",{props:["className"],template:p.DialogTemplate,methods:{onCloseDialog:function(e){this.$emit(u,{type:e})}},data:function(){return d+=1,{zIndex:d,zMaskIndex:d-1}}});var v=new c({template:p.AlertDialogTemplate,data:function(){return{title:"",message:""}}});t.default=c},function(e,t,i){"use strict";var o=i(0),n=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);t.default=e}(o),i(4)),s=function(e){return e&&e.__esModule?e:{default:e}}(n);i(7),i(25);var a=i(29),r=i(32);i(36);var c=new VueRouter({mode:"hash",routes:[{path:"/",redirect:"/topics",component:s.default,children:[{path:"/topics",component:r.TopicsView},{path:"/topic",redirect:"/topics"},{path:"/topic/create",component:r.TopicCreateView},{path:"/topic/update",component:r.TopicUpdateView},{path:"/topic/:id",component:r.TopicSingleView},{path:"/user/create",component:a.UserCreateComponent},{path:"/user/login",component:a.UserLoginComponent}]}]}),l=new Vue({el:"#mainBody",router:c});window.ubibiApp=l,t.app=l},function(e,t,i){"use strict";function o(e,t,i){var o=n[e];if(o&&Date.now()-o.time<1e3*t)return o.promise;var s=i();return n[e]={promise:s,time:Date.now()},s}Object.defineProperty(t,"__esModule",{value:!0}),t.getCacheOrCreatePromise=o;var n={}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(5);var o=i(6),n={template:o.AppHeaderTemplate},s={template:o.AppRootTemplate,components:{"app-header":n}};t.default=s},function(e,t){},function(e,t){e.exports={AppRootTemplate:'<div class="app-root"> <page-loading/> <app-header /> <router-view/> </div>',AppHeaderTemplate:'<div class="app-header"> <div class="nav"> <div class="nav-right"> <router-link class="login-link" to="/user/login">登录</router-link> <router-link class="login-link" to="/user/create">注册</router-link> </div> </div> </div>'}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(8);i(9),i(1),i(12),i(15),i(18),i(21),i(22);var n=i(24);(0,o.installStateLessComponent)(n),t.default="ok"},function(e,t,i){"use strict";function o(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if("string"==typeof i)Vue.component(t,{template:i});else{var o=i.content,n=i.propsMap,s=n.props||"",a=s.split(",");Vue.component(t,{template:o,props:a,methods:{onClick:function(e){this.$emit("click",e)}}})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.installStateLessComponent=o},function(e,t){},function(e,t){e.exports={DialogTemplate:'<div class="bs-dialog-wrapper"> <div class="bs-dialog" :class="className" :style=\'{"z-index":zIndex}\'> <div class="bs-dialog-header"> <div class="bs-dialog-title"><slot name="title"/></div> <span @click="onCloseDialog(0)"></span> </div> <div class="bs-dialog-body"> <slot name="body"/> </div> <div class="bs-dialog-footer"> <i class="bs-button bs-button-cancel" @click="onCloseDialog(0)">取消</i> <i class="bs-button bs-button-ok" @click="onCloseDialog(1)">确定</i> </div> </div> <div class="bs-dialog-mask" :style=\'{"z-index":zMaskIndex}\'></div> </div>',AlertDialogTemplate:"<div slot='title'>{{title}}</div> <div slot='body'>{{message}}</div>"}},function(e,t){},function(e,t,i){"use strict";i(13);var o=i(14),n=function(e){return e&&e.__esModule?e:{default:e}}(o);Vue.component("bs-pagination",{template:n.default,props:["current","pageSize","totalCount"],data:function(){return{showItem:5}},computed:{allpage:function(){var e=parseInt(this.totalCount),t=parseInt(this.pageSize);return Math.ceil(e/t)},pages:function(){var e=parseInt(this.totalCount),t=parseInt(this.pageSize),i=Math.ceil(e/t),o=parseInt(this.current),n=[];if(o<this.showItem)for(var s=Math.min(this.showItem,i);s;)n.unshift(s--);else{var a=o-Math.floor(this.showItem/2);for(s=this.showItem,a>i-this.showItem&&(a=i-this.showItem+1);s--;)n.push(a++)}return n}},methods:{goto:function(e){e!=parseInt(this.current)&&this.$emit("page",e)}}})},function(e,t){},function(e,t){e.exports='<ul class="bs-pagination" > <li v-show="current != 1" @click="goto(current-1)" ><span>上一页</span></li> <li v-for="idx in pages" @click="goto(idx)" :class="{\'bs-pagination-active\':current == idx}" :key="idx"> <span>{{idx}}</span> </li> <li v-show="allpage != current && allpage != 0 " @click="goto(current+1)"><span>下一页</span></li></ul>'},function(e,t,i){"use strict";var o=i(16);i(17),Vue.component("page-loading",{template:o.PageLoadingTemplate,methods:{},data:function(){return{style1:{}}}})},function(e,t){e.exports={PageLoadingTemplate:'<div class="bs-page-loading"><span :style="style1"></span></div>'}},function(e,t){},function(e,t,i){"use strict";i(19);var o=i(20);Vue.component("bs-upload-button",{props:["className"],template:o.t1})},function(e,t){},function(e,t){e.exports={t1:'<div class="bs-upload bs-upload-button" :class="className"> <input type="file" /> <bs-button title="文件上传" theme="ok" /> </div>'}},function(e,t,i){"use strict";Vue.directive("xsrc",{bind:function(e,t,i){var o=t.value,n=window.server_vars_static_host;0===o.indexOf("/static/")&&n&&(o=n+o),e.setAttribute("src",o)}})},function(e,t,i){"use strict";var o=i(23),n=function(e){return e&&e.__esModule?e:{default:e}}(o);Vue.filter("formatTime",function(e,t){t=t||"YYYY-MM-DD hh:mm:ss";var i=parseInt(e,10),o=new Date(i);return(0,n.default)(o,t)})},function(e,t,i){"use strict";function o(e,t){var i={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t){e.exports={"bs-card":{content:'<div class="bs-card" :class="className"> <div class="bs-card-ms"> <div class="bs-card-title" v-if="title&&title.length>0">{{title}}</div> <slot /> </div> </div>',propsMap:{id:"bs-card",props:"className,title"},propsLength:2,firstProp:"id"},"bs-button":{content:'<div @click="onClick()" class="bs-button" :class="(className||\'\') + \' bs-button-\'+theme ">{{title}}</div>',propsMap:{id:"bs-button",props:"className,title,theme"},propsLength:2,firstProp:"id"}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(26),t.default="ok"},function(e,t,i){"use strict";i(27);var o=i(28);Vue.component("bsv-reply",{template:o.ReplyViewTemplate,data:function(){return{createMsg:"",replyList:[{},{},{},{},{},{},{},{},{},{}]}},methods:{onReply:function(){}}})},function(e,t){},function(e,t){e.exports={ReplyViewTemplate:'<div class="ReplyView"> <div class="ReplyCreate"> <textarea v-model="createMsg" placeholder="说些什么..."/> <div class="clear"></div> <bs-button title="提交回复" theme="ok" @click="onReply()"/> </div> <div class="ReplyItem" v-for="replyItem in replyList"> <div class="reply-avatar"> <img src="/static/images/tmpimg/aaaa.png"/> </div> <div class="reply-content"> <div class="line1"> <span class="nickname">栾海鹏</span> <span class="floorNumber">1楼</span> <span class="createtime">2017年07月18日19:55</span> </div> <div class="line2"> 咱都是开发就你上空间大非农看就 </div> </div> </div> <div class="ReplyLoad">加载更多回复...</div> </div>'}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserLoginComponent=t.UserCreateComponent=void 0;var o=i(30);i(31);t.UserCreateComponent={template:o.UserCreateTemplate,data:function(){return{regType:"email"}}},t.UserLoginComponent={template:o.UserLoginTemplate,data:function(){return{regType:"email"}}}},function(e,t){e.exports={UserCreateTemplate:'<div class="user-create"> <div class=""> <div @click="regType=\'email\'" :class="{regTypeCurrent:regType==\'email\'}">邮箱注册</div> <div @click="regType=\'mobile\'" :class="{regTypeCurrent:regType==\'mobile\'}">手机注册</div> </div> </div>',UserLoginTemplate:'<div class="user-login"> user login </div>'}},function(e,t){},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(33),s=i(1),a=o(s),r=i(34),c=o(r);i(35);var l={template:n.t2,props:["topic"],data:function(){return{}}},p=new a.default({template:n.t3,data:function(){return{data:(new Date).getTime()}},dialog:{className:"TopicViewDialog",beforeClose:function(){},afterClose:function(){}}}),u={template:n.t1,components:{TopicsItemView:l},methods:{openDialog:function(){p.openDialog()},onPageChange:function(e){this.topicListCur=e},doQueryTopicList:function(){var e=this,t=e.topicListPageSize,i=e.topicListCur;c.default.getTopicsList(i,t).then(function(t){e.topicList=t.dataList.result,e.topicListTotal=t.totalCount.result[0].total_count})}},created:function(){this.doQueryTopicList()},data:function(){return{topicListPageSize:10,topicListTotal:0,topicListCur:1,topicList:[]}}},d={template:n.t4,data:function(){return{topicObject:{}}},created:function(){var e=this,t=this.$route,i=t.params.id;c.default.getTopicById(i).then(function(t){e.topicObject=t.result[0]})}},v={template:n.t5,data:function(){return{topicObject:{title:"",content:"",description:""}}},methods:{handlePublishTopic:function(){var e=this.topicObject;c.default.postTopic(e)}}},f={template:n.t6,data:function(){return{}}};e.exports={TopicsView:u,TopicSingleView:d,TopicCreateView:v,TopicUpdateView:f}},function(e,t){e.exports={t1:'<div class="TopicsView"> <button @click="openDialog">openDialog</button> <router-link to="/topic/create">创建文章</router-link> <bs-card> <TopicsItemView v-for="topic in topicList" :topic="topic" key="topic.id"/> <bs-pagination :current=\'topicListCur\' :pageSize="topicListPageSize" :totalCount="topicListTotal" @page="onPageChange"/> </bs-card> </div>',t2:'<div :class="topic.img?\'TopicsItemView\':\' TopicsItemView noCover\'"> <div class="cover"> <img v-xsrc="\'/static/images/tmpimg/aaaa.png\'" /> </div> <div class="content"> <router-link :to="\'/topic/\'+topic.id" class="title bs-nowrap">{{topic.title}}</router-link> <div class="summary">{{topic.description}}</div> <div class="infos"> <img class="avatar" v-xsrc="\'/static/images/tmpimg/aaaa.png\'" /> <span class="nickname">luanhaipeng</span> <span class="createtime">发布于 {{topic.create_time | formatTime}}</span> <span class="viewcount"> 阅读 ( {{topic.view_count}} ) </span> </div> </div> <div class="bs-clear"></div> </div>',t3:'<div slot="title" class="title111">新建文件夹</div> <div slot="body">hello world--{{data}}</div>',t4:'<div> <bs-card className="TopicSingleView" title=""> <h1 class="topic-title">{{topicObject.title}}</h1> <div class="topic-summary">{{topicObject.description}}</div> <div class="topic-content"> {{topicObject.content}} </div> </bs-card> <div class="bs-clear10"></div> <bs-card title="回复"> <bsv-reply id="topic:1" /> </bs-card> </div>',t5:'<div class="TopicCreateView"> <bs-card> <div class="box"> <h2>文章标题:</h2> <input type="text" placeholder="标题字数10字以上" v-model="topicObject.title" > </div> <div class="box"> <h2>文章封面:</h2> <div> <bs-upload-button className="upload-cover"/> </div> </div> <div class="box"> <h2>文章正文:</h2> <div class="bs-textarea-wrapper"> <textarea placeholder="撰写文章" v-model="topicObject.content"></textarea> </div> </div> <div class="box"> <h2>文章摘要:</h2> <div class="bs-textarea-wrapper summary-textarea"> <textarea placeholder="文章摘要" v-model="topicObject.description"></textarea> </div> </div> <div class="box"> <select class="select-category"> <option value="0">请选择分类</option> </select> </div> <div class="box"> <bs-button title="发布文章" theme="ok" @click="handlePublishTopic" /> </div> </bs-card> </div>',t6:'<div class="TopicUpdateView"> update </div>'}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={getTopicsList:function(e,t,i,o,s,a,r){var c=n.default.toQueryString({page_no:e,page_size:t,category_id:i,is_top:o,topic_type:s,order_by:a,order_by_type:r});return n.default.sendGetJSONRequest("/api/v1/ubibi/topics?"+c)},getTopicById:function(e){return n.default.sendGetJSONRequest("/api/v1/ubibi/topic/"+e)},postTopic:function(e){return n.default.sendPostJSONRequest("/api/v1/ubibi/topic",e)},putTopic:function(e,t){return n.default.sendPutJSONRequest("/api/v1/ubibi/topic/"+e,t)},deleteTopic:function(e){return n.default.sendDeleteJSONRequest("/api/v1/ubibi/topic/"+e)},getTopicCategorySubject:function(e){return n.default.sendGetJSONRequest("/api/v1/ubibi/topic_category_subject?clear_cache="+e)},getReplyOfTopic:function(e,t,i){var o=n.default.toQueryString({page_no:i,page_size:t});return n.default.sendGetJSONRequest("/api/v1/ubibi/reply/"+e+"?"+o)},postReply:function(e){return n.default.sendPostJSONRequest("/api/v1/ubibi/reply",e)}}},function(e,t){},function(e,t){}]);